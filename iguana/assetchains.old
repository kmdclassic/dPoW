#!/bin/bash
#set -x
delay=60
if [[ ! -r "pubkey.txt" ]]; then
    echo "Error: pubkey.txt does not exist or is not readable."
    exit 1
fi

source pubkey.txt

if [[ -z "$pubkey" ]]; then
    echo "Error: 'pubkey' variable is not set in pubkey.txt."
    exit 1
fi
echo "Public Key: $pubkey"

# Determine which ${PREFIX}kmdclassicd to use: system-wide or local
if command -v ${PREFIX}kmdclassicd >/dev/null 2>&1; then
    PREFIX=""
    echo "Using system-wide kmdclassicd ..."
elif [[ -x "./kmdclassicd" ]]; then
    PREFIX="./"
    echo "Using local ./kmdclassicd ..."
else
    echo "Error: Neither system-wide ${PREFIX}kmdclassicd nor ./${PREFIX}kmdclassicd found."
    exit 1
fi

${PREFIX}kmdclassicd -pubkey=$pubkey -ac_name=PIRATE -ac_supply=0 -ac_reward=25600000000 -ac_halving=77777 -ac_private=1 -addnode=88.99.212.81 -addnode=209.222.101.247 -addnode=103.195.100.32 $1 &